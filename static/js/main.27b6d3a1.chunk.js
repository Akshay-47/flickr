(this["webpackJsonpflick-picker"]=this["webpackJsonpflick-picker"]||[]).push([[0],{38:function(e,t,a){e.exports=a(67)},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),s=a.n(c),l=a(17),i=a(10),o=a(11),m=a(7),u=a.n(m),p=a(18),v=a(16),d=a.n(v),E=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),l=Object(p.a)(s,2),m=l[0],v=l[1],E=Object(n.useState)(!1),h=Object(p.a)(E,2),f=h[0],g=h[1],b=Object(o.f)().postId;var w=function(e){var t;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(d.a.get(e));case 2:return t=a.sent,a.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(t)}),1e3)})));case 4:case"end":return a.stop()}}))};Object(n.useEffect)((function(){!function(){var e,t;u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e="https://akrp-server.herokuapp.com/movies/"+b,a.prev=1,v(!0),g(!1),a.next=6,u.a.awrap(w(e));case 6:t=a.sent,c(t.data[0]),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),g(!0);case 13:v(!1);case 14:case"end":return a.stop()}}),null,null,[[1,10]])}()}));var N="https://image.tmdb.org/t/p/original"+a.poster_path;return r.a.createElement(r.a.Fragment,null,!m&&!f&&r.a.createElement("div",{className:"single-item"},r.a.createElement("div",{className:"main-title"},console.log(a),r.a.createElement("h1",null,a.original_title),r.a.createElement("span",{className:"release-date"},"(",a.release_date,")"),r.a.createElement("span",{className:"vote-average"},r.a.createElement("span",null,a.vote_average,r.a.createElement("span",{className:"vote-count"},a.vote_count," votes")),"/",r.a.createElement("small",null,"10"))),r.a.createElement("span",{className:"back-button"},r.a.createElement(i.b,{to:"/"},r.a.createElement("span",{className:"back-arrow"},"\u2190")," Back")),r.a.createElement("div",{className:"heading"}),r.a.createElement("div",{className:"secondary-info"}),r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{className:"main-image",src:"".concat(N),alt:a.title})),r.a.createElement("div",{className:"right-section"},r.a.createElement("p",null,a.overview)))),f?r.a.createElement("div",null,"Something went wrong"):m?r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"lds-hourglass centered"})):void 0)},h=a(24),f=a(19),g=function(e){var t,a;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t="https://akrp-server.herokuapp.com/movies?p="+e,n.next=3,u.a.awrap(d.a.get(t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}))},b="movies/GET_INIT",w="movies/GET_DONE",N="movies/GET_ERROR";var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pagesFetched:0,fetchError:null,isFetching:0,list:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(f.a)({},e,{isFetching:!0,fetchError:null});case w:var a=[].concat(Object(h.a)(e.list),Object(h.a)(t.payload)),n=e.pagesFetched+1;return Object(f.a)({},e,{isFetching:!1,list:a,pagesFetched:n});case N:return Object(f.a)({},e,{isFetching:!1,fetchError:t.payload});default:return e}},y="SET_SCROLL";var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return e=t.payload;default:return e}},j=function(e){return e.map((function(e,t){return r.a.createElement("div",{key:t,className:"movie-item"},r.a.createElement("article",{className:"",key:t},r.a.createElement(i.b,{to:"/view/".concat(e._id)},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{src:"".concat("https://image.tmdb.org/t/p/w500").concat(e.poster_path),alt:"poster"})),r.a.createElement("div",{className:"movie-title"},r.a.createElement("h3",null,e.original_title)))))}))},_=Object(l.b)((function(e){return{movies:e.movies,scroll_:e.scroll_}}),(function(e){return{getMovies:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,a){var n,r,c;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(n=a(),!((r=n.movies).isFetching||!e&&r.list.length>0)){s.next=3;break}return s.abrupt("return");case 3:return t({type:b}),s.prev=4,s.next=7,u.a.awrap(g(r.pagesFetched+1));case 7:c=s.sent,t({type:w,payload:c}),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(4),t({type:N,payload:s.t0});case 14:case"end":return s.stop()}}),null,null,[[4,11]])}}(t))},onPageScroll:function(t){return e({type:y,payload:t})}}}))((function(e){var t=e.movies,a=e.getMovies,c=e.onPageScroll,s=e.scroll_;return Object(n.useEffect)((function(){var e;return e=s,window.scrollBy(0,e),function(){c(window.pageYOffset)}}),[s]),Object(n.useEffect)((function(){function e(e){var t=e.target.scrollingElement,n=t.scrollTop;t.scrollHeight-t.offsetHeight-n<100&&a(!0)}return a(),window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),r.a.createElement("div",{className:"movies"},r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(i.b,{to:"/"},"Flick Picker"))),r.a.createElement("div",{className:"movie-grid"},j(t.list)),t.isFetching?r.a.createElement("div",{className:"centered"},r.a.createElement("div",{className:"lds-hourglass centered"})):t.fetchError?r.a.createElement("div",null,"Failed to load movies."):null)})),x=function(e){e.children;var t=e.match;return r.a.createElement("div",null,r.a.createElement(o.a,{exact:!0,path:t.path,component:_}),r.a.createElement(o.a,{exact:!0,path:"".concat(t.path,"view/:postId"),component:E}))},F=a(12),S=a(37),T=Object(F.c)({movies:O,scroll_:k});var I=Object(F.d)(T,Object(F.a)(S.a)),L=(a(66),r.a.createElement(l.a,{store:I},r.a.createElement(i.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",component:x})))));s.a.render(L,document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.27b6d3a1.chunk.js.map